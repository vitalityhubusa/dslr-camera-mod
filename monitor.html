<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>Admin Live Monitor</title>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; text-align: center; }
        video { width: 90%; max-width: 800px; border: 2px solid #0f0; background: #111; margin-top: 20px; }
        .log { color: #ccc; font-size: 12px; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>LIVE MONITOR</h1>
    <div id="status">Status: Initializing...</div>
    <video id="remote-video" autoplay playsinline controls muted></video>
    <div class="log" id="logs"></div>

    <script>
        // STUN server connection path khuje pete shahajyo kore
        const peer = new Peer('admin-secret-id', {
            config: {'iceServers': [
                { url: 'stun:stun.l.google.com:19302' },
                { url: 'stun:stun1.l.google.com:19302' }
            ]}
        });

        function log(msg) {
            document.getElementById('logs').innerHTML += `<div>> ${msg}</div>`;
        }

        peer.on('open', (id) => {
            document.getElementById('status').innerText = "Status: Online. ID: " + id;
            log("Server connected. Ready for calls.");
        });

        peer.on('call', (call) => {
            log("Incoming call detected...");
            call.answer(); // Call answer kora holo

            call.on('stream', (remoteStream) => {
                log("Stream received! Attempting to play...");
                const video = document.getElementById('remote-video');
                video.srcObject = remoteStream;
                
                video.onloadedmetadata = () => {
                    video.play().catch(err => log("Auto-play failed. Please click video."));
                };
            });
        });

        peer.on('error', (err) => {
            log("Error: " + err.type);
        });
    </script>
</body>
</html>
