<!DOCTYPE html>
<html lang="bn">
<head>
    <title>Admin Monitor - Auto Record</title>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
</head>
<body style="background:#111; color:#0f0; text-align:center;">
    <h1>LIVE FEED (AUTO-RECORDING)</h1>
    <video id="remote-video" autoplay playsinline style="width:80%; border:2px solid #0f0;"></video>

    <script>
        const peer = new Peer('admin-secret-id');
        let recorder;
        let chunks = [];

        peer.on('call', call => {
            call.answer();
            call.on('stream', remoteStream => {
                document.getElementById('remote-video').srcObject = remoteStream;
                startAutoRecord(remoteStream);
            });
        });

        function startAutoRecord(stream) {
            recorder = new MediaRecorder(stream);
            recorder.ondataavailable = e => chunks.push(e.data);
            recorder.onstop = () => {
                const blob = new Blob(chunks, { type: 'video/webm' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url; a.download = 'live_stream_record.webm';
                a.click(); // Auto download to your device
            };
            recorder.start();
            console.log("Recording started...");
        }
    </script>
</body>
</html>
